(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".hotnipi-gauge-linear[data-v-25a857c9]{container-type:inline-size;container-name:hotnipi-gauge-linear}.hotnipi-gauge-linear-grid-2[data-v-25a857c9]{display:grid;grid-template-columns:2rem auto;gap:1rem;height:100%}.hotnipi-gauge-linear-grid-1[data-v-25a857c9]{display:grid;grid-template-columns:1fr;gap:1rem;height:100%}.hotnipi-gauge-linear-icon[data-v-25a857c9]{display:flex;justify-content:center;align-items:center}.hotnipi-gauge-linear-icon .v-icon[data-v-25a857c9]{font-size:min(3rem,calc(var(--widget-row-height) * 1.1))}.hotnipi-gauge-linear-content[data-v-25a857c9]{container-type:inline-size;container-name:level-content;display:grid;grid-template-rows:1.3em minmax(3px,1fr) .7em;gap:2px;height:100%}.hotnipi-gauge-linear-text[data-v-25a857c9]{font-size:1.25em;line-height:1em;align-self:end;display:flex;gap:.5rem;justify-content:space-between;-webkit-user-select:none;user-select:none;overflow:auto}.hotnipi-gauge-linear-label[data-v-25a857c9]{font-size:min(1rem,1.7cqh);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.hide-label .hotnipi-gauge-linear-label[data-v-25a857c9]{display:none}.hide-label .hotnipi-gauge-linear-text[data-v-25a857c9]{justify-content:flex-end}.hotnipi-gauge-linear-value[data-v-25a857c9]{font-size:min(1rem,1.7cqh);font-weight:700}.hide-value .hotnipi-gauge-linear-value[data-v-25a857c9]{display:none}.hotnipi-gauge-linear-unit[data-v-25a857c9]{font-size:min(.75rem,1.275cqh);font-weight:400;padding-inline-start:.15em}.hotnipi-gauge-linear-stripe[data-v-25a857c9]{display:flex}.hotnipi-gauge-linear-led[data-v-25a857c9]{background:#fff;width:100%;height:100%;border-left:1px solid rgb(var(--v-theme-group-background));border-right:1px solid rgb(var(--v-theme-group-background));border-radius:0}.hotnipi-gauge-linear-limits[data-v-25a857c9]{display:block;position:relative;font-size:min(.75rem,1.275cqh);line-height:1;-webkit-user-select:none;user-select:none}.hotnipi-gauge-linear-limit[data-v-25a857c9]{position:absolute;transform:translate(-50%)}.hide-limits .hotnipi-gauge-linear-limit[data-v-25a857c9]{display:none}.hotnipi-gauge-linear-limit[data-v-25a857c9]:first-child{left:0;transform:translate(0)}.hotnipi-gauge-linear-limit[data-v-25a857c9]:last-child{right:0;transform:translate(0)}@container level-content (width < 130px){.hotnipi-gauge-linear-led[data-v-25a857c9]:nth-child(2n){display:none}.hotnipi-gauge-linear-limit[data-v-25a857c9]:not(:first-child):not(:last-child){display:none}}@container level-content (width < 120px){.hotnipi-gauge-linear-label[data-v-25a857c9]{display:none}.hotnipi-gauge-linear-text[data-v-25a857c9]{justify-content:flex-end}}@container hotnipi-gauge-linear (max-width: 160px){.hotnipi-gauge-linear-grid-2[data-v-25a857c9]{grid-template-columns:1rem auto}.hotnipi-gauge-linear-icon .v-icon[data-v-25a857c9]{font-size:calc(var(--v-icon-size-multiplier)* 2em)!important}@container style(--responsive-cut: icon){.hotnipi-gauge-linear-grid-2[data-v-25a857c9]{grid-template-columns:1fr}.hotnipi-gauge-linear-icon[data-v-25a857c9]{display:none}}}")),document.head.appendChild(e)}}catch(i){console.error("vite-plugin-css-injected-by-js",i)}})();
(function(r,h){typeof exports=="object"&&typeof module<"u"?h(exports,require("vuex"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vuex","vue"],h):(r=typeof globalThis<"u"?globalThis:r||self,h(r["ui-gauge-linear"]={},r.vuex,r.Vue))})(this,function(r,h,i){"use strict";const y=(t,e)=>{const s=t.__vccOpts||t;for(const[n,o]of e)s[n]=o;return s},g={name:"UIGaugeLinear",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(t){},data(){return{label:"Level zero cross",icon:"mdi-account",min:{value:0,label:""},max:{value:100,label:""},unit:"cmÂ³",dim:.2,animate:!0,colors:["#57b9ff","#57b9ff","#57b9ff","#57b9ff","#00e300","#00e300","#00e300","#00e300","#ffa916","#ffa916","#ffa916","#ffa916","#ff4c16","#ff4c16","#ff4c16","#ff4c16"],ticks:[],mode:"default",zeroCrossColors:["#ff4c16","#00e300"],value:0,previousValue:0,class:"",inited:!1}},methods:{applyProperties:function(){const t=this.props;this.ticks=t.ticks,this.min={value:Number(t.min),label:t.minLabel},this.max={value:Number(t.max),label:t.maxLabel},this.colors=t.colors,this.mode=t.mode,this.label=t.label,this.unit=t.unit,this.dim=Number(t.dim),this.icon=t.icon.startsWith("mdi-")?t.icon:t.icon==""?"":"mdi-"+t.icon,this.zeroCrossColors=t.zeroCrossColors,this.class=this.props.myclass},getElement:function(t,e){return e?this.$refs[t]:this.$refs[t][0]},labelFor:function(t){let e="";return!t.label||t.label==""?(e=t.value,this.mode=="zeroCross"&&(t===this.min?e="0":t===this.max?this.value<0?e=this.min.value:e=this.max.value:e=this.value<0?t.value*-1:t.value)):e=t.label,e},validate(t){let e;if(typeof t!="number"){if(e=parseFloat(t),isNaN(e))return null}else e=t;return e},full:function(){return Math.floor(this.colors.length*this.percentage/100)},half:function(){let t=this.colors.length*this.percentage/100;return t-=this.full(),t*=.5,t+=this.dim,t},tickPosition:function(t){if(this.mode=="zeroCross"){let e=Math.abs(t),s=this.value<0?Math.abs(this.min.value):this.max.value;return Math.floor(e/s*100)+"%"}return Math.floor((t-this.min.value)/(this.max.value-this.min.value)*100)+"%"},arrangeTicks:function(){this.mode=="zeroCross"&&this.max.value!=Math.abs(this.min.value)&&(this.ticks=[]),this.ticks.forEach((t,e)=>{let s=this.getElement("tick-"+e);s&&(s.style.left=this.tickPosition(t.value))})},replaceColors:function(){this.colors.forEach((t,e)=>{let s=this.getElement("dot-"+e);s&&(s.style.backgroundColor=t)})},lit:function(){if(this.inited==!1)return;const t=this.previousValue>this.value;let e=t?1:.2,s=t?.12:.06,n=this.mode=="fullBar"?this.colors[this.full()]:null;this.mode=="zeroCross"&&(n=this.value<0?this.zeroCrossColors[0]:this.zeroCrossColors[1]),this.colors.forEach((o,l)=>{let a=this.getElement("dot-"+l);if(!a){console.log("lit() no dots found");return}l<this.full()?(a.style.opacity=1,e+=s):l==this.full()?a.style.opacity=this.half():a.style.opacity=this.dim,e-=s,n&&(a.style.backgroundColor=n),a.style.transition=this.animate&&e>0?"opacity "+e+"s":"unset"}),this.previousValue=this.value},onPayload:function(t){var s,n,o,l,a,d,c,f,p,m,_,k,b;if((t==null?void 0:t.payload)!=null){const u=this.validate(t.payload);u!==null&&(this.value=u,this.lit())}let e=!1;if((s=t.ui_update)!=null&&s.min&&((n=t.ui_update)!=null&&n.min.value)&&typeof((o=t.ui_update)==null?void 0:o.min.value)=="number"&&(this.min=t.ui_update.min,e=!0),(l=t.ui_update)!=null&&l.max&&((a=t.ui_update)!=null&&a.max.value)&&typeof((d=t.ui_update)==null?void 0:d.max.value)=="number"&&(this.max=t.ui_update.max,e=!0),(c=t.ui_update)!=null&&c.unit&&typeof t.ui_update.unit=="string"&&(this.unit=t.ui_update.unit),(f=t.ui_update)!=null&&f.label&&typeof t.ui_update.label=="string"&&(this.label=t.ui_update.label),((p=t.ui_update)==null?void 0:p.class)!=null&&typeof t.ui_update.class=="string"&&(this.class=t.ui_update.class),(m=t.ui_update)!=null&&m.icon&&typeof t.ui_update.icon=="string"){let u=t.ui_update.icon;this.icon=u.startsWith("mdi-")?u:u==""?"":"mdi-"+u}Array.isArray((_=t.ui_update)==null?void 0:_.ticks)&&(this.ticks=t.ui_update.ticks,e=!0),Array.isArray((k=t.ui_update)==null?void 0:k.colors)&&(this.colors=t.ui_update.colors,this.$nextTick(()=>{this.replaceColors(),this.lit()})),Array.isArray((b=t.ui_update)==null?void 0:b.zeroCrossColors)&&(this.zeroCrossColors=t.ui_update.zeroCrossColors,this.$nextTick(()=>{this.lit()})),e&&this.$nextTick(()=>{this.arrangeTicks(),this.lit()})}},computed:{...h.mapState("data",["messages"]),formattedValue:function(){return this.value.toFixed(2)},percentage:function(){let t=this.value;if(this.mode=="zeroCross"){t=Math.abs(this.value);let e=this.value<0?Math.abs(this.min.value):this.max.value;return Math.floor(t/e*100)}return Math.floor((t-this.min.value)/(this.max.value-this.min.value)*100)}},mounted(){this.applyProperties(),this.$socket.on("widget-load:"+this.id,t=>{this.onPayload(t)}),this.$socket.on("msg-input:"+this.id,t=>{this.onPayload(t),this.$store.commit("data/bind",{widgetId:this.id,msg:t})}),this.$nextTick(()=>{this.mode=="zeroCross"&&this.max.value!=Math.abs(this.min.value)&&(this.ticks=[]),this.colors.forEach((t,e)=>{let s=this.getElement("dot-"+e);s&&(s.style.backgroundColor=t)}),this.ticks.forEach((t,e)=>{let s=this.getElement("tick-"+e);s&&(s.style.left=this.tickPosition(t.value))}),this.inited=!0,this.lit()}),this.$socket.emit("widget-load",this.id)},unmounted(){var t,e;(t=this.$socket)==null||t.off("widget-load:"+this.id),(e=this.$socket)==null||e.off("msg-input:"+this.id)}},v={key:0,class:"hotnipi-gauge-linear-icon"},C={class:"hotnipi-gauge-linear-content"},x={class:"hotnipi-gauge-linear-text"},E={class:"hotnipi-gauge-linear-label"},V={class:"hotnipi-gauge-linear-value"},N={class:"hotnipi-gauge-linear-unit"},z={class:"hotnipi-gauge-linear-stripe"},B={class:"hotnipi-gauge-linear-limits"},M={class:"hotnipi-gauge-linear-limit"},S={class:"hotnipi-gauge-linear-limit"};function T(t,e,s,n,o,l){const a=i.resolveComponent("v-icon");return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(["hotnipi-gauge-linear",o.class]),style:{"--responsive-cut":"icon"}},[i.createElementVNode("div",{class:i.normalizeClass(o.icon?"hotnipi-gauge-linear-grid-2":"hotnipi-gauge-linear-grid-1")},[o.icon?(i.openBlock(),i.createElementBlock("div",v,[i.createVNode(a,{"aria-hidden":"false"},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(o.icon),1)]),_:1})])):i.createCommentVNode("",!0),i.createElementVNode("div",C,[i.createElementVNode("div",x,[i.createElementVNode("span",E,i.toDisplayString(o.label),1),i.createElementVNode("span",V,[i.createTextVNode(i.toDisplayString(l.formattedValue),1),i.createElementVNode("span",N,i.toDisplayString(o.unit),1)])]),i.createElementVNode("div",z,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(o.colors,(d,c)=>(i.openBlock(),i.createElementBlock("div",{key:c,class:"hotnipi-gauge-linear-led",ref_for:!0,ref:"dot-"+c}))),128))]),i.createElementVNode("div",B,[i.createElementVNode("span",M,i.toDisplayString(l.labelFor(o.min)),1),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(o.ticks,(d,c)=>(i.openBlock(),i.createElementBlock("span",{key:c,class:"hotnipi-gauge-linear-limit",ref_for:!0,ref:"tick-"+c},i.toDisplayString(l.labelFor(d)),1))),128)),i.createElementVNode("span",S,i.toDisplayString(l.labelFor(o.max)),1)])])],2)],2)}const P=y(g,[["render",T],["__scopeId","data-v-25a857c9"]]);r.UIGaugeLinear=P,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
