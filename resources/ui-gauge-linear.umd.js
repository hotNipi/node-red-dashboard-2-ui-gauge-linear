(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".hotnipi-gauge-linear[data-v-71ff4f42]{container-type:inline-size;container-name:hotnipi-gauge-linear}.hotnipi-gauge-linear-grid-2[data-v-71ff4f42]{display:grid;grid-template-columns:2rem auto;gap:1rem;height:100%}.hotnipi-gauge-linear-grid-1[data-v-71ff4f42]{display:grid;grid-template-columns:1fr;gap:1rem;height:100%}.hotnipi-gauge-linear-icon[data-v-71ff4f42]{display:flex;justify-content:center;align-items:center}.hotnipi-gauge-linear-icon .v-icon[data-v-71ff4f42]{font-size:min(3rem,calc(var(--widget-row-height) * 1.1))}.hotnipi-gauge-linear-content[data-v-71ff4f42]{container-type:inline-size;container-name:level-content;display:grid;grid-template-rows:1.3em minmax(3px,1fr) .7em;gap:2px;height:100%}.hotnipi-gauge-linear-text[data-v-71ff4f42]{font-size:1.25em;line-height:1em;align-self:end;display:flex;gap:.5rem;justify-content:space-between;-webkit-user-select:none;user-select:none;overflow:auto}.hotnipi-gauge-linear-label[data-v-71ff4f42]{font-size:min(1rem,1.7cqh);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.hotnipi-gauge-linear-value[data-v-71ff4f42]{font-size:min(1rem,1.7cqh);font-weight:700}.hotnipi-gauge-linear-unit[data-v-71ff4f42]{font-size:min(.75rem,1.275cqh);font-weight:400;padding-inline-start:.15em}.hotnipi-gauge-linear-stripe[data-v-71ff4f42]{display:flex}.hotnipi-gauge-linear-led[data-v-71ff4f42]{background:#fff;width:100%;height:100%;border-left:1px solid rgb(var(--v-theme-group-background));border-right:1px solid rgb(var(--v-theme-group-background));border-radius:0}.hotnipi-gauge-linear-limits[data-v-71ff4f42]{display:block;position:relative;font-size:min(.75rem,1.275cqh);line-height:1;-webkit-user-select:none;user-select:none}.hotnipi-gauge-linear-limit[data-v-71ff4f42]{position:absolute;transform:translate(-50%)}.hotnipi-gauge-linear-limit[data-v-71ff4f42]:first-child{left:0;transform:translate(0)}.hotnipi-gauge-linear-limit[data-v-71ff4f42]:last-child{right:0;transform:translate(0)}@container level-content (width < 130px){.hotnipi-gauge-linear-led[data-v-71ff4f42]:nth-child(2n){display:none}.hotnipi-gauge-linear-limit[data-v-71ff4f42]:not(:first-child):not(:last-child){display:none}}@container level-content (width < 120px){.hotnipi-gauge-linear-label[data-v-71ff4f42]{display:none}.hotnipi-gauge-linear-text[data-v-71ff4f42]{justify-content:flex-end}}@container hotnipi-gauge-linear (max-width: 160px){.hotnipi-gauge-linear-grid-2[data-v-71ff4f42]{grid-template-columns:1rem auto}.hotnipi-gauge-linear-icon .v-icon[data-v-71ff4f42]{font-size:calc(var(--v-icon-size-multiplier)* 2em)!important}@container style(--responsive-cut: icon){.hotnipi-gauge-linear-grid-2[data-v-71ff4f42]{grid-template-columns:1fr}.hotnipi-gauge-linear-icon[data-v-71ff4f42]{display:none}}}")),document.head.appendChild(e)}}catch(i){console.error("vite-plugin-css-injected-by-js",i)}})();
(function(r,h){typeof exports=="object"&&typeof module<"u"?h(exports,require("vuex"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vuex","vue"],h):(r=typeof globalThis<"u"?globalThis:r||self,h(r["ui-gauge-linear"]={},r.vuex,r.Vue))})(this,function(r,h,i){"use strict";const _=(e,t)=>{const o=e.__vccOpts||e;for(const[n,s]of t)o[n]=s;return o},g={name:"UIGaugeLinear",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(e){},data(){return{label:"Level zero cross",icon:"mdi-account",min:{value:0,label:""},max:{value:100,label:""},unit:"cmÂ³",dim:.2,animate:!0,colors:["#57b9ff","#57b9ff","#57b9ff","#57b9ff","#00e300","#00e300","#00e300","#00e300","#ffa916","#ffa916","#ffa916","#ffa916","#ff4c16","#ff4c16","#ff4c16","#ff4c16"],ticks:[],mode:"default",zeroCrossColors:["#ff4c16","#00e300"],value:0,previousValue:0,inited:!1}},methods:{applyProperties:function(){const e=this.props;this.ticks=e.ticks,this.min={value:Number(e.min),label:e.minLabel},this.max={value:Number(e.max),label:e.maxLabel},this.colors=e.colors,this.mode=e.mode,this.label=e.label,this.unit=e.unit,this.dim=Number(e.dim),this.icon=e.icon.startsWith("mdi-")?e.icon:e.icon==""?"":"mdi-"+e.icon,this.zeroCrossColors=e.zeroCrossColors},getElement:function(e,t){return t?this.$refs[e]:this.$refs[e][0]},labelFor:function(e){let t="";return!e.label||e.label==""?(t=e.value,this.mode=="zeroCross"&&(e===this.min?t="0":e===this.max?this.value<0?t=this.min.value:t=this.max.value:t=this.value<0?e.value*-1:e.value)):t=e.label,t},validate(e){let t;if(typeof e!="number"){if(t=parseFloat(e),isNaN(t))return null}else t=e;return t},full:function(){return Math.floor(this.colors.length*this.percentage/100)},half:function(){let e=this.colors.length*this.percentage/100;return e-=this.full(),e*=.5,e+=this.dim,e},tickPosition:function(e){if(this.mode=="zeroCross"){let t=Math.abs(e),o=this.value<0?Math.abs(this.min.value):this.max.value;return Math.floor(t/o*100)+"%"}return Math.floor((e-this.min.value)/(this.max.value-this.min.value)*100)+"%"},arrangeTicks:function(){this.mode=="zeroCross"&&this.max.value!=Math.abs(this.min.value)&&(this.ticks=[]),this.ticks.forEach((e,t)=>{let o=this.getElement("tick-"+t);o&&(o.style.left=this.tickPosition(e.value))})},replaceColors:function(){this.colors.forEach((e,t)=>{let o=this.getElement("dot-"+t);o&&(o.style.backgroundColor=e)})},lit:function(){if(this.inited==!1)return;const e=this.previousValue>this.value;let t=e?1:.2,o=e?.12:.06,n=this.mode=="fullBar"?this.colors[this.full()]:null;this.mode=="zeroCross"&&(n=this.value<0?this.zeroCrossColors[0]:this.zeroCrossColors[1]),this.colors.forEach((s,l)=>{let a=this.getElement("dot-"+l);if(!a){console.log("lit() no dots found");return}l<this.full()?(a.style.opacity=1,t+=o):l==this.full()?a.style.opacity=this.half():a.style.opacity=this.dim,t-=o,n&&(a.style.backgroundColor=n),a.style.transition=this.animate&&t>0?"opacity "+t+"s":"unset"}),this.previousValue=this.value},onPayload:function(e){var o,n,s,l,a,f,c,d,p,m;if((e==null?void 0:e.payload)!=null){const u=this.validate(e.payload);u!==null&&(this.value=u,this.lit())}let t=!1;if((o=e.ui_update)!=null&&o.min&&((n=e.ui_update)!=null&&n.min.value)&&typeof((s=e.ui_update)==null?void 0:s.min.value)=="number"&&(this.min=e.ui_update.min,t=!0),(l=e.ui_update)!=null&&l.max&&((a=e.ui_update)!=null&&a.max.value)&&typeof((f=e.ui_update)==null?void 0:f.max.value)=="number"&&(this.max=e.ui_update.max,t=!0),(c=e.ui_update)!=null&&c.unit&&typeof e.ui_update.unit=="string"&&(this.unit=e.ui_update.unit),(d=e.ui_update)!=null&&d.icon&&typeof e.ui_update.icon=="string"){let u=e.ui_update.icon;this.icon=u.startsWith("mdi-")?u:u==""?"":"mdi-"+u}Array.isArray((p=e.ui_update)==null?void 0:p.colors)&&(this.colors=e.ui_update.colors,this.$nextTick(()=>{this.replaceColors()})),Array.isArray((m=e.ui_update)==null?void 0:m.zeroCrossColors)&&(this.zeroCrossColors=e.ui_update.zeroCrossColors,this.$nextTick(()=>{this.lit()})),t&&this.$nextTick(()=>{this.arrangeTicks()})}},computed:{...h.mapState("data",["messages"]),formattedValue:function(){return this.value.toFixed(2)},percentage:function(){let e=this.value;if(this.mode=="zeroCross"){e=Math.abs(this.value);let t=this.value<0?Math.abs(this.min.value):this.max.value;return Math.floor(e/t*100)}return Math.floor((e-this.min.value)/(this.max.value-this.min.value)*100)}},mounted(){this.applyProperties(),this.$socket.on("widget-load:"+this.id,e=>{this.onPayload(e)}),this.$socket.on("msg-input:"+this.id,e=>{this.onPayload(e),this.$store.commit("data/bind",{widgetId:this.id,msg:e})}),this.$nextTick(()=>{this.mode=="zeroCross"&&this.max.value!=Math.abs(this.min.value)&&(this.ticks=[]),this.colors.forEach((e,t)=>{let o=this.getElement("dot-"+t);o&&(o.style.backgroundColor=e)}),this.ticks.forEach((e,t)=>{let o=this.getElement("tick-"+t);o&&(o.style.left=this.tickPosition(e.value))}),this.inited=!0,this.lit()}),this.$socket.emit("widget-load",this.id)},unmounted(){var e,t;(e=this.$socket)==null||e.off("widget-load:"+this.id),(t=this.$socket)==null||t.off("msg-input:"+this.id)}},k={class:"hotnipi-gauge-linear",style:{"--responsive-cut":"icon"}},b={key:0,class:"hotnipi-gauge-linear-icon"},y={class:"hotnipi-gauge-linear-content"},v={class:"hotnipi-gauge-linear-text"},x={class:"hotnipi-gauge-linear-label"},C={class:"hotnipi-gauge-linear-value"},E={class:"hotnipi-gauge-linear-unit"},V={class:"hotnipi-gauge-linear-stripe"},N={class:"hotnipi-gauge-linear-limits"},z={class:"hotnipi-gauge-linear-limit"},B={class:"hotnipi-gauge-linear-limit"};function M(e,t,o,n,s,l){const a=i.resolveComponent("v-icon");return i.openBlock(),i.createElementBlock("div",k,[i.createElementVNode("div",{class:i.normalizeClass(s.icon?"hotnipi-gauge-linear-grid-2":"hotnipi-gauge-linear-grid-1")},[s.icon?(i.openBlock(),i.createElementBlock("div",b,[i.createVNode(a,{"aria-hidden":"false"},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(s.icon),1)]),_:1})])):i.createCommentVNode("",!0),i.createElementVNode("div",y,[i.createElementVNode("div",v,[i.createElementVNode("span",x,i.toDisplayString(s.label),1),i.createElementVNode("span",C,[i.createTextVNode(i.toDisplayString(l.formattedValue),1),i.createElementVNode("span",E,i.toDisplayString(s.unit),1)])]),i.createElementVNode("div",V,[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(s.colors,(f,c)=>(i.openBlock(),i.createElementBlock("div",{key:c,class:"hotnipi-gauge-linear-led",ref_for:!0,ref:"dot-"+c}))),128))]),i.createElementVNode("div",N,[i.createElementVNode("span",z,i.toDisplayString(l.labelFor(s.min)),1),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(s.ticks,(f,c)=>(i.openBlock(),i.createElementBlock("span",{key:c,class:"hotnipi-gauge-linear-limit",ref_for:!0,ref:"tick-"+c},i.toDisplayString(l.labelFor(f)),1))),128)),i.createElementVNode("span",B,i.toDisplayString(l.labelFor(s.max)),1)])])],2)])}const S=_(g,[["render",M],["__scopeId","data-v-71ff4f42"]]);r.UIGaugeLinear=S,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
