(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".hotnipi-gauge-linear[data-v-d5533778]{container-type:inline-size;container-name:hotnipi-gauge-linear}.hotnipi-gauge-linear-grid-2[data-v-d5533778]{display:grid;grid-template-columns:2rem auto;gap:1rem;height:100%}.hotnipi-gauge-linear-grid-1[data-v-d5533778]{display:grid;grid-template-columns:1fr;gap:1rem;height:100%}.hotnipi-gauge-linear-icon[data-v-d5533778]{display:flex;justify-content:center;align-items:center}.hotnipi-gauge-linear-icon .v-icon[data-v-d5533778]{font-size:min(3rem,calc(var(--widget-row-height) * 1.1))}.hotnipi-gauge-linear-content[data-v-d5533778]{container-type:inline-size;container-name:level-content;display:grid;grid-template-rows:1.3em minmax(3px,1fr) .7em;gap:2px;height:100%}.hotnipi-gauge-linear-text[data-v-d5533778]{font-size:1.25em;line-height:1em;align-self:end;display:flex;gap:.5rem;justify-content:space-between;-webkit-user-select:none;user-select:none;overflow:auto}.hotnipi-gauge-linear-label[data-v-d5533778]{font-size:min(1rem,1.7cqh);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.hide-label .hotnipi-gauge-linear-label[data-v-d5533778]{display:none}.hide-label .hotnipi-gauge-linear-text[data-v-d5533778]{justify-content:flex-end}.hotnipi-gauge-linear-value[data-v-d5533778]{font-size:min(1rem,1.7cqh);font-weight:700}.hide-value .hotnipi-gauge-linear-value[data-v-d5533778]{display:none}.hotnipi-gauge-linear-unit[data-v-d5533778]{font-size:min(.75rem,1.275cqh);font-weight:400;padding-inline-start:.15em}.hotnipi-gauge-linear-stripe[data-v-d5533778]{display:flex}.hotnipi-gauge-linear-stripe-solid[data-v-d5533778]{display:block;position:relative}.hotnipi-gauge-linear-bar[data-v-d5533778]{background:#fff;position:absolute;left:0;top:0;width:100%;height:100%;transition:width .8s ease-in-out}.hotnipi-gauge-linear-led[data-v-d5533778]{background:#fff;width:100%;height:100%;border-left:1px solid rgb(var(--v-theme-group-background));border-right:1px solid rgb(var(--v-theme-group-background));border-radius:0}.hotnipi-gauge-linear-limits[data-v-d5533778]{display:block;position:relative;font-size:min(.75rem,1.275cqh);line-height:1;-webkit-user-select:none;user-select:none}.hotnipi-gauge-linear-limit[data-v-d5533778]{position:absolute;transform:translate(-50%)}.hide-limits .hotnipi-gauge-linear-limit[data-v-d5533778]{display:none}.hotnipi-gauge-linear-limit[data-v-d5533778]:first-child{left:0;transform:translate(0)}.hotnipi-gauge-linear-limit[data-v-d5533778]:last-child{right:0;transform:translate(0)}@container level-content (width < 130px){.hotnipi-gauge-linear-led[data-v-d5533778]:nth-child(2n){display:none}.hotnipi-gauge-linear-limit[data-v-d5533778]:not(:first-child):not(:last-child){display:none}}@container level-content (width < 120px){.hotnipi-gauge-linear-label[data-v-d5533778]{display:none}.hotnipi-gauge-linear-text[data-v-d5533778]{justify-content:flex-end}}@container hotnipi-gauge-linear (max-width: 160px){.hotnipi-gauge-linear-grid-2[data-v-d5533778]{grid-template-columns:1rem auto}.hotnipi-gauge-linear-icon .v-icon[data-v-d5533778]{font-size:calc(var(--v-icon-size-multiplier)* 2em)!important}@container style(--responsive-cut: icon){.hotnipi-gauge-linear-grid-2[data-v-d5533778]{grid-template-columns:1fr}.hotnipi-gauge-linear-icon[data-v-d5533778]{display:none}}}")),document.head.appendChild(e)}}catch(i){console.error("vite-plugin-css-injected-by-js",i)}})();
(function(h,d){typeof exports=="object"&&typeof module<"u"?d(exports,require("vuex"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vuex","vue"],d):(h=typeof globalThis<"u"?globalThis:h||self,d(h["ui-gauge-linear"]={},h.vuex,h.Vue))})(this,function(h,d,e){"use strict";const C=(t,i)=>{const s=t.__vccOpts||t;for(const[l,o]of i)s[l]=o;return s},x={name:"UIGaugeLinear",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(t){},data(){return{label:"Level zero cross",icon:"mdi-account",min:0,max:10,minLabel:"",maxLabel:"",unit:"cmÂ³",dim:.2,animate:!0,colors:[],ticks:[],bar:"segmented",mode:"default",zeroCrossColors:["#ff4c16","#00e300"],value:0,previousValue:0,decimals:2,zeros:!0,class:"",inited:!1}},methods:{applyProperties:function(){console.log(this.props);const t=this.props;this.ticks=t.ticks,this.min=Number(t.min),this.max=Number(t.max),this.minLabel=t.minLabel,this.maxLabel=t.maxLabel,this.colors=t.colors,this.mode=t.mode,this.bar=t.bar,this.label=t.label,this.unit=t.unit,this.property=t.property??"payload",this.dim=Number(t.dim),this.icon=t.icon.startsWith("mdi-")?t.icon:t.icon==""?"":"mdi-"+t.icon,this.zeroCrossColors=t.zeroCrossColors,this.class=this.props.myclass,this.decimals=Number(t.decimals),this.zeros=t.zeros,console.log("Min and max",this.min,this.max)},getElement:function(t,i){return i?this.$refs[t]:this.$refs[t]&&this.$refs[t].length?this.$refs[t][0]:null},labelForMin:function(){let t="";return this.minLabel!=""?t=this.minLabel:t=this.min,this.mode=="zeroCross"&&(t="0"),t},labelForMax:function(){let t="";return this.maxLabel!=""?t=this.maxLabel:t=this.max,this.mode=="zeroCross"&&(this.value<0?t=this.minLabel==""?this.min:this.minLabel:t=this.maxLabel==""?this.max:this.maxLabel),t},labelForTick:function(t){let i="";return!t.label||t.label==""?(i=t.value,this.mode=="zeroCross"&&(i=this.value<0?t.value*-1:t.value)):i=t.label,i},validate(t){let i;if(typeof t!="number"){if(i=parseFloat(t),isNaN(i))return null}else i=t;return i},full:function(){return Math.floor(this.colors.length*this.percentage/100)},half:function(){let t=this.colors.length*this.percentage/100;return t-=this.full(),t*=.5,t+=this.dim,t},segmentedFullBarColor:function(){let t=this.full()-1;return t=Math.min(t,this.colors.length-1),t=Math.max(t,0),this.colors[t].color},tickPosition:function(t){if(this.mode=="zeroCross"){let i=Math.abs(t),s=this.value<0?Math.abs(this.min):this.max;return Math.floor(i/s*100)+"%"}return Math.floor((t-this.min)/(this.max-this.min)*100)+"%"},arrangeTicks:function(){this.mode=="zeroCross"&&this.max!=Math.abs(this.min)&&(this.ticks=[]),this.ticks.forEach((t,i)=>{let s=this.getElement("tick-"+i);s&&(s.style.left=this.tickPosition(t.value))})},replaceColors:function(){this.bar=="segmented"&&this.colors.forEach((t,i)=>{let s=this.getElement("dot-"+i);s&&(s.style.backgroundColor=t.color)})},lit:function(){if(this.inited==!1)return;if(this.bar=="solid"){this.move();return}const t=this.previousValue>this.value;let i=t?1:.2,s=t?.12:.06,l=this.mode=="fullBar"?this.segmentedFullBarColor():null;this.mode=="zeroCross"&&(l=this.value<0?this.zeroCrossColors[0]:this.zeroCrossColors[1]),this.colors.forEach((o,a)=>{let n=this.getElement("dot-"+a);if(!n){console.log("lit() no dots found");return}a<this.full()?(n.style.opacity=1,i+=s):a==this.full()?n.style.opacity=this.half():n.style.opacity=this.dim,i-=s,l&&(n.style.backgroundColor=l),n.style.transition=this.animate&&i>0?"opacity "+i+"s":"unset"}),this.previousValue=this.value},move:function(){let t;if(this.mode=="fullBar"){t=this.getElement("bar",!0);let i=0,s=this.ticks.findLastIndex(l=>l.value<this.value);s>-1&&(i=s+1),i>this.colors.length-1&&(i=this.colors.length-1),t.style.backgroundColor=this.fullBarColors[i].color,t.style.width=this.percentage+"%"}else this.colors.forEach((i,s)=>{if(t=this.getElement("bar-"+s),!t){console.log("move() no bars found");return}t.style.width=this.percentage+"%",this.mode=="zeroCross"&&(t.style.backgroundColor=this.value<0?this.zeroCrossColors[0]:this.zeroCrossColors[1])})},onPayload:function(t){var s,l,o,a,n,c,r,f,m,p,b,_,g,k,y;if((t==null?void 0:t.payload)!=null){const u=this.validate(t.payload);u!==null&&(this.value=u,this.lit())}let i=!1;if((s=t.ui_update)!=null&&s.min&&((l=t.ui_update)!=null&&l.min.value)&&typeof((o=t.ui_update)==null?void 0:o.min.value)=="number"&&(this.min=t.ui_update.min.value,(a=t.ui_update)!=null&&a.min.label&&(this.minLabel=t.ui_update.min.label),i=!0),(n=t.ui_update)!=null&&n.max&&((c=t.ui_update)!=null&&c.max.value)&&typeof((r=t.ui_update)==null?void 0:r.max.value)=="number"&&(this.max=t.ui_update.max.value,(f=t.ui_update)!=null&&f.max.label&&(this.maxLabel=t.ui_update.max.label),i=!0),(m=t.ui_update)!=null&&m.unit&&typeof t.ui_update.unit=="string"&&(this.unit=t.ui_update.unit),(p=t.ui_update)!=null&&p.label&&typeof t.ui_update.label=="string"&&(this.label=t.ui_update.label),((b=t.ui_update)==null?void 0:b.class)!=null&&typeof t.ui_update.class=="string"&&(this.class=t.ui_update.class),(_=t.ui_update)!=null&&_.icon&&typeof t.ui_update.icon=="string"){let u=t.ui_update.icon;this.icon=u.startsWith("mdi-")?u:u==""?"":"mdi-"+u}Array.isArray((g=t.ui_update)==null?void 0:g.ticks)&&(this.ticks=t.ui_update.ticks,i=!0),Array.isArray((k=t.ui_update)==null?void 0:k.colors)&&(this.colors=t.ui_update.colors,this.$nextTick(()=>{this.replaceColors(),this.lit()})),Array.isArray((y=t.ui_update)==null?void 0:y.zeroCrossColors)&&(this.zeroCrossColors=t.ui_update.zeroCrossColors,this.$nextTick(()=>{this.lit()})),i&&this.$nextTick(()=>{this.arrangeTicks(),this.lit()})}},computed:{...d.mapState("data",["messages"]),formattedValue:function(){let t=this.zeros==!0?this.decimals:0;return new Intl.NumberFormat("en",{useGrouping:!1,maximumFractionDigits:this.decimals,minimumFractionDigits:t}).format(this.value)},percentage:function(){let t=this.value;if(this.mode=="zeroCross"){t=Math.abs(this.value);let i=this.value<0?Math.abs(this.min):this.max;return Math.min(Math.floor(t/i*100),100)}return Math.min(Math.floor((t-this.min)/(this.max-this.min)*100),100)}},mounted(){this.applyProperties(),this.$socket.on("widget-load:"+this.id,t=>{this.onPayload(t)}),this.$socket.on("msg-input:"+this.id,t=>{this.onPayload(t),this.$store.commit("data/bind",{widgetId:this.id,msg:t})}),this.$nextTick(()=>{this.mode=="zeroCross"&&this.max!=Math.abs(this.min)&&(this.ticks=[]);let t;this.colors.forEach((i,s)=>{if(this.bar=="segmented"){if(t=this.getElement("dot-"+s),!t)return;t.style.backgroundColor=i.color}else if(this.mode!="fullBar"){if(t=this.getElement("bar-"+s),!t)return;t.style.maxWidth=i.size+"%"}}),this.mode=="fullBar"&&this.bar=="solid"&&(this.fullBarColors=[...this.colors],this.fullBarColors.reverse()),this.ticks.forEach((i,s)=>{let l=this.getElement("tick-"+s);l&&(l.style.left=this.tickPosition(i.value))}),this.inited=!0,this.lit()}),this.$socket.emit("widget-load",this.id)},unmounted(){var t,i;(t=this.$socket)==null||t.off("widget-load:"+this.id),(i=this.$socket)==null||i.off("msg-input:"+this.id)}},E={key:0,class:"hotnipi-gauge-linear-icon"},B={class:"hotnipi-gauge-linear-content"},z={class:"hotnipi-gauge-linear-text"},L={class:"hotnipi-gauge-linear-label"},N={class:"hotnipi-gauge-linear-value"},V={class:"hotnipi-gauge-linear-unit"},M={key:0,class:"hotnipi-gauge-linear-stripe"},F={key:1,class:"hotnipi-gauge-linear-stripe-solid"},S=["id"],T={key:1,class:"hotnipi-gauge-linear-bar",ref:"bar"},v={class:"hotnipi-gauge-linear-limits"},w={class:"hotnipi-gauge-linear-limit"},D={class:"hotnipi-gauge-linear-limit"};function P(t,i,s,l,o,a){const n=e.resolveComponent("v-icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["hotnipi-gauge-linear",o.class]),style:{"--responsive-cut":"icon"}},[e.createElementVNode("div",{class:e.normalizeClass(o.icon?"hotnipi-gauge-linear-grid-2":"hotnipi-gauge-linear-grid-1")},[o.icon?(e.openBlock(),e.createElementBlock("div",E,[e.createVNode(n,{"aria-hidden":"false"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(o.icon),1)]),_:1})])):e.createCommentVNode("",!0),e.createElementVNode("div",B,[e.createElementVNode("div",z,[e.createElementVNode("span",L,e.toDisplayString(o.label),1),e.createElementVNode("span",N,[e.createTextVNode(e.toDisplayString(a.formattedValue),1),e.createElementVNode("span",V,e.toDisplayString(o.unit),1)])]),o.bar=="segmented"?(e.openBlock(),e.createElementBlock("div",M,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.colors,(c,r)=>(e.openBlock(),e.createElementBlock("div",{key:r,class:"hotnipi-gauge-linear-led",ref_for:!0,ref:"dot-"+r,style:e.normalizeStyle("background-color:"+c.color+";")},null,4))),128))])):e.createCommentVNode("",!0),o.bar=="solid"?(e.openBlock(),e.createElementBlock("div",F,[o.mode!="fullBar"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(o.colors,(c,r)=>(e.openBlock(),e.createElementBlock("div",{key:r,id:"bar-"+r,style:e.normalizeStyle("background-color:"+c.color+";max-width:"+c.size+"%;"),class:"hotnipi-gauge-linear-bar",ref_for:!0,ref:"bar-"+r},null,12,S))),128)):e.createCommentVNode("",!0),o.mode=="fullBar"?(e.openBlock(),e.createElementBlock("div",T,null,512)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",v,[e.createElementVNode("span",w,e.toDisplayString(a.labelForMin()),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.ticks,(c,r)=>(e.openBlock(),e.createElementBlock("span",{key:r,class:"hotnipi-gauge-linear-limit",ref_for:!0,ref:"tick-"+r},e.toDisplayString(a.labelForTick(c)),1))),128)),e.createElementVNode("span",D,e.toDisplayString(a.labelForMax()),1)])])],2)],2)}const I=C(x,[["render",P],["__scopeId","data-v-d5533778"]]);h.UIGaugeLinear=I,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});
